# 001-03 テンプレートファイル読み込みツール実装

作成日時: 2025-07-31 10:00
参照アイディアファイル: `001_プロジェクトの概要.md`

## 実装する機能

Obsidian vault 内のテンプレートファイルを読み込む MCP ツールを実装します。

## 機能の詳細な仕様

### read_template_file ツール

- ツール名: `read_template_file`
- 機能: vault 内の固定テンプレートファイルを読み込み
- 読み込み対象: 設定ファイルで指定された固定テンプレートファイル
- 入力パラメータ: なし
- 動作:
  - プログラム内で指定されたテンプレートファイルの内容を読み込んで返却
  - ファイルが存在しない場合はエラーを返却

### エラーハンドリング

- vault_path が設定されていない場合のエラー
- テンプレートファイルが存在しない場合のエラー
- ファイルパスが vault 外を指している場合のセキュリティエラー
- ファイル読み込み権限エラー

## 技術的な実装方針

### 使用クレート（追加）

- `std::fs`: ファイル操作
- `std::path`: パス操作

### モジュール構造拡張

```text
src/
├── main.rs
├── config.rs
├── mcp/
│   ├── mod.rs
│   ├── protocol.rs
│   ├── server.rs
│   └── tools/
│       ├── mod.rs
│       ├── save_markdown.rs
│       └── read_template.rs  # 新規追加
├── vault/
│   ├── mod.rs
│   └── operations.rs
└── error.rs
```

### 実装手順

1. read_template_file ツールの実装
2. MCP サーバーへのツール登録
3. エラーハンドリングの実装
4. 動作確認とテスト

### セキュリティ考慮

- パストラバーサル攻撃の防止
- vault 外へのアクセス制限
- ファイルパスの検証

### 動作確認方法

- read_template_file ツールの個別テスト
- VSCode での MCP 連携テスト
- エラーケースの確認

## 次のステップ

このプランの完了後、実装内容をもとにプロジェクト仕様書を作成します。
