# 001-01 基本 MCP サーバー構築

作成日時: 2025-07-31 10:00
参照アイディアファイル: `001_プロジェクトの概要.md`

## 実装する機能

MCP サーバーの基本構造を構築し、Rust 環境での基本的な MCP プロトコル実装を行います。

## 機能の詳細な仕様

### 基本構造

- MCP プロトコルに準拠したサーバー実装
- stdin/stdout を使用した JSON-RPC 通信
- 基本的な MCP ハンドシェイク処理
- エラーハンドリング機能

### 設定管理

- TOML ファイルによる設定読み込み機能
- デフォルト設定パス: `~/.config/obsidian-mcp-server/config.toml`
- vault_path の設定項目

### 必須応答

- `initialize`リクエストの処理
- `list_tools`リクエストの処理（空のツールリストを返す）
- 基本的なエラーレスポンス

## 技術的な実装方針

### 使用クレート

- `serde`と`serde_json`: JSON シリアライゼーション
- `tokio`: 非同期ランタイム
- `toml`: 設定ファイル読み込み
- `anyhow`: エラーハンドリング
- `clap`: コマンドライン引数処理

### プロジェクト構造

```text
src/
├── main.rs          # エントリーポイント
├── config.rs        # 設定管理
├── mcp/
│   ├── mod.rs       # MCPモジュール
│   ├── protocol.rs  # MCPプロトコル定義
│   └── server.rs    # MCPサーバー実装
└── error.rs         # エラー定義
```

### 実装手順

1. 依存関係の追加
2. 基本的な MCP プロトコル構造体の定義
3. 設定管理モジュールの実装
4. MCP サーバーの基本実装
5. main.rs でのサーバー起動処理
6. ビルドとインストールの確認

### 動作確認方法

- `cargo build`でのコンパイル確認
- `cargo install --path .`でのインストール確認
- 基本的な MCP 通信テスト（initialize リクエスト）

## 次のステップ

このプランの完了後、`001-02`で Obsidian vault 操作の具体的なツール実装を行います。
