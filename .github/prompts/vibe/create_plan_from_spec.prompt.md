---
mode: 'agent'
description: '仕様書からプランファイル作成'
---

このプロンプトは、`.docs/specs/requirements.md` と `.docs/specs/design.md` を参照してプランファイルを作成します。

## 実行手順

### フェーズ 1: 仕様書分析

1. 要件定義書の把握
   - `.docs/specs/requirements.md` の全要件を確認
   - 各要件のユーザーストーリーと受け入れ基準を理解
   - 要件間の依存関係を分析

2. 設計書の把握
   - `.docs/specs/design.md` のアーキテクチャを確認
   - 実装対象のコンポーネント・クラスを特定
   - データ構造とインターフェース設計を理解

3. 実装範囲の特定
   - 対象となる要件番号を明確化
   - 実装が必要なコンポーネントを列挙
   - 既存システムとの統合ポイントを特定

### フェーズ 2: プラン分割判定

1. 実装複雑度の評価
   - 実装手順が5ステップを超えるか判定
   - 複数の画面・コンポーネントにまたがるか確認
   - ビルド・テスト・動作確認が複数回必要か評価

2. 分割方針の決定
   - 単一プランファイル: シンプルな機能追加の場合
   - 分割プランファイル: 複雑な機能の場合
     - `01-`: 基本設計・環境構築・初回ビルド確認
     - `02-`: コアデータモデル実装・単体テスト
     - `03-`: UI・画面表示機能・表示確認
     - `04-`: 操作・制御機能・操作テスト
     - `05-`: 拡張機能・最適化・総合テスト

### フェーズ 3: プランファイル作成

1. 基本情報セクション作成
   - 作成日: YYYY-MM-DD形式
   - 参照仕様書セクション（requirements.md の要件番号）
   - 参照設計書セクション（design.md のコンポーネント名）

2. 概要と目標セクション作成
   - 実装する機能の詳細説明
   - 達成すべき具体的な目標
   - requirements.md との対応関係を明記

3. 実装手順セクション作成
   - フェーズ別の詳細ステップ
   - 各ステップでの成果物を明記
   - ビルド・テスト・動作確認の手順を含める
   - design.md の設計内容を参照した具体的な実装指示

4. 品質保証セクション作成
   - 各フェーズでの確認ポイント
   - requirements.md の受け入れ基準との整合性確認
   - design.md のアーキテクチャとの整合性確認

### フェーズ 4: ファイル配置と命名

1. ファイル名決定
   - 単一プラン: `XXX_<機能名>.md`（XXXは3桁連番）
   - 分割プラン: `XXX-YY_<機能名>_implementation.md`（YYは分割番号）

2. 配置確認
   - `.docs/plans/` ディレクトリに配置
   - 機能名は英語のスネークケースで記述

### フェーズ 5: 仕様書との整合性確認

1. requirements.md との対応確認
   - 全ての対象要件がプランに反映されているか確認
   - 受け入れ基準が実装手順で満たされるか検証

2. design.md との対応確認
   - 設計されたコンポーネントが実装手順に含まれているか確認
   - アーキテクチャパターンに沿った実装手順になっているか検証

## 注意事項

- プランファイルの詳細な構成要素とテンプレートは `general.instructions.md` を参照
- 品質保証チェックポイントは `general.instructions.md` の基準に従う
- 分割プランファイルの場合、各ファイルは独立して理解できるよう記述
- 実装手順には必ず各ステップの最後にビルド・動作確認を含める

